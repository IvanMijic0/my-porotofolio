import type { ReactNode, CSSProperties } from "react";
import clsx from "clsx";

type Fit = "contain" | "cover";

type WideSquircleContainerProps = {
	children?: ReactNode;
	className?: string;
	height?: number | string;
	aspectRatio?: number;
	fit?: Fit;
	colorA?: string;
	colorAOpacity?: number;
	colorB?: string;
};

const NATIVE_W = 857;
const NATIVE_H = 500;
const NATIVE_RATIO = NATIVE_W / NATIVE_H;
const WideSquircleContainer = ({
	children,
	className,
	height,
	aspectRatio = NATIVE_RATIO,
	fit = "contain",
	colorA = "#252525",
	colorAOpacity = 0.6,
	colorB = "#424242",
}: WideSquircleContainerProps) => {
	const style: CSSProperties = {};
	style.width = "100%";
	if (height == null) style.aspectRatio = String(aspectRatio);
	else style.height = typeof height === "number" ? `${height}px` : height;

	const preserve = fit === "cover" ? "xMidYMid slice" : "xMidYMid meet";

	return (
		<div className={clsx("relative overflow-hidden w-full", className)} style={style}>
			<svg
				aria-hidden="true"
				className="absolute inset-0 h-full w-full"
				xmlns="http://www.w3.org/2000/svg"
				viewBox={`0 0 ${NATIVE_W} ${NATIVE_H}`}
				preserveAspectRatio={preserve}
			>
				<g transform="scale(1, 0.85)">
					<mask id="path-1-inside-1_66_239" fill="#fff">
						<path d="M511.825.384c23.99-.57 50.051-.337 78.158-.337C694.235.047 774.565-1.55 815.327 42.4c43.735 47.154 41.61 118.1 41.61 222.961s3.417 174.607-40.011 223.764c-42.361 47.948-122.691 44.75-226.942 44.75-30.473 0-58.229.452-83.447-.095-19.991.24-41.217.095-63.54.095-35.176 0-66.729.603-94.939-.426-24.962.671-52.069.426-81.021.426-104.251 0-176.683 5.32-224.592-42.353C-3.882 445.423.085 370.223.085 265.362s0-182.444 39.962-222.163C86.68-3.151 162.785.047 267.036.047c30.288 0 58.557-.133 84.423.754C379.05-.28 409.577.047 442.996.047c24.31 0 47.319-.088 68.829.337"></path>
					</mask>
					<path
						fill={colorA}
						fillOpacity={colorAOpacity}
						d="M511.825.384c23.99-.57 50.051-.337 78.158-.337C694.235.047 774.565-1.55 815.327 42.4c43.735 47.154 41.61 118.1 41.61 222.961s3.417 174.607-40.011 223.764c-42.361 47.948-122.691 44.75-226.942 44.75-30.473 0-58.229.452-83.447-.095-19.991.24-41.217.095-63.54.095-35.176 0-66.729.603-94.939-.426-24.962.671-52.069.426-81.021.426-104.251 0-176.683 5.32-224.592-42.353C-3.882 445.423.085 370.223.085 265.362s0-182.444 39.962-222.163C86.68-3.151 162.785.047 267.036.047c30.288 0 58.557-.133 84.423.754C379.05-.28 409.577.047 442.996.047c24.31 0 47.319-.088 68.829.337"
					/>
					<path
						fill={colorB}
						d="m511.825.384-.02 1h.044zm78.158-.337v1zM815.327 42.4l.733-.68zm41.61 222.961h-1zm-40.011 223.764.749.662zm-226.942 44.75v-1zm-83.447-.095.022-1h-.034zm-63.54.095v-1zm-94.939-.426.036-.999-.032-.002-.031.001zm-81.021.426v-1zM42.445 491.522l-.705.709zM.085 265.362h1zM40.047 43.199l-.705-.71zM267.036.047v1zM351.459.8l-.034.999.036.001.037-.001zm91.537-.754v1zm68.829.337.024 1c23.974-.57 50.014-.337 78.134-.337v-2c-28.094 0-54.176-.232-78.182.337zm78.158-.337v1c52.157 0 98.221-.397 136.348 4.687s68.118 15.626 88.263 37.346l.733-.68.733-.68c-20.617-22.229-51.172-32.863-89.464-37.969-38.292-5.105-84.518-4.704-136.613-4.704zM815.327 42.4l-.733.68c21.674 23.37 32.027 52.667 36.947 89.294 4.925 36.654 4.396 80.521 4.396 132.987h2c0-52.395.533-96.432-4.414-133.254-4.95-36.85-15.402-66.602-37.463-90.387zm41.61 222.961h-1c0 52.473.852 96.038-3.713 132.647-4.56 36.576-14.515 66.082-36.048 90.455l.75.662.749.662c21.896-24.784 31.946-54.73 36.534-91.531 4.584-36.768 3.728-80.507 3.728-132.895zm-40.011 223.764-.75-.662c-20.948 23.711-51.337 34.846-89.646 40.027-38.324 5.182-84.379 4.385-136.546 4.385v2c52.085 0 98.32.802 136.814-4.404 38.508-5.207 69.465-16.447 90.877-40.684zm-226.942 44.75v-1c-30.497 0-58.221.452-83.425-.095l-.022 1-.022 1c25.233.547 53.019.095 83.469.095zm-83.447-.095-.012-1c-19.983.24-41.196.095-63.528.095v2c22.313 0 43.553.145 63.552-.095zm-63.54.095v-1c-35.204 0-66.716.602-94.903-.425l-.036.999-.037.999c28.235 1.03 59.829.427 94.976.427zm-94.939-.426-.027-1c-24.944.671-52.028.426-80.994.426v2c28.939 0 56.068.245 81.047-.426zm-81.021.426v-1c-52.18 0-96.254 1.327-133.301-3.292-37.007-4.614-66.847-15.148-90.585-38.77l-.706.709-.705.709c24.17 24.051 54.5 34.693 91.749 39.337 37.209 4.639 81.477 3.307 133.548 3.307zM42.445 491.522l.706-.709c-22.942-22.828-33.481-52.9-38.267-90.462-4.789-37.588-3.8-82.513-3.799-134.989h-2c0 52.385-.994 97.491 3.815 135.242 4.813 37.778 15.454 68.356 38.84 91.627zM.085 265.362h1c0-52.453.002-97.989 4.986-135.378 4.986-37.393 14.935-66.45 34.68-86.076l-.704-.709-.705-.71C19.126 62.584 9.094 92.177 4.089 129.72-.917 167.269-.915 212.954-.915 265.362zM40.047 43.199l.705.71C63.85 20.95 94.287 10.212 132.066 5.232c37.803-4.984 82.804-4.186 134.97-4.186v-2c-52.085 0-97.262-.802-135.232 4.203C93.81 8.258 62.878 19.097 39.342 42.49zM267.036.047v1c30.297 0 58.544-.133 84.389.753l.034-1 .034-.999c-25.887-.887-54.178-.754-84.457-.754zM351.459.8l.039.999c27.565-1.08 58.061-.753 91.498-.753v-2c-33.402 0-63.96-.327-91.576.754zm91.537-.754v1c24.316 0 47.312-.088 68.809.336l.02-1 .02-1c-21.523-.424-44.546-.336-68.849-.336z"
					/>
				</g>
			</svg>

			<div className="relative z-10 flex h-full w-full items-center justify-center">
				{children}
			</div>
		</div>
	);
};

export default WideSquircleContainer;
