import type { ReactNode, CSSProperties } from "react";
import clsx from "clsx";

type Fit = "contain" | "cover";

type TallSquircleProps = {
	children?: ReactNode;
	className?: string;
	width?: number | string;
	height?: number | string;
	aspectRatio?: number;
	fit?: Fit;
	colorA?: string;
	colorAOpacity?: number;
	colorB?: string;
};

const NATIVE_W = 780;
const NATIVE_H = 1117;
const NATIVE_RATIO = NATIVE_W / NATIVE_H;

const TallSquircleContainer = ({
	children,
	className,
	width = "100%",
	height = "100%",
	aspectRatio = NATIVE_RATIO,
	fit = "cover",
	colorA = "#252525",
	colorAOpacity = 0.6,
	colorB = "#424242",
}: TallSquircleProps) => {
	const style: CSSProperties = {
		width: typeof width === "number" ? `${width}px` : width,
	};

	if (height == null) {
		style.aspectRatio = String(aspectRatio);
	} else {
		style.height = typeof height === "number" ? `${height}px` : height;
	}

	const preserveAspectRatio = fit === "cover" ? "xMaxYMid slice" : "xMaxYMid meet";

	return (
		<div className={clsx("relative overflow-hidden", className)} style={style}>
			<svg
				aria-hidden="true"
				className="absolute inset-0 h-full w-full"
				xmlns="http://www.w3.org/2000/svg"
				viewBox={`0 0 ${NATIVE_W} ${NATIVE_H}`}
				preserveAspectRatio={preserveAspectRatio}
			>
				<mask id="path-1-inside-1_66_297" fill="#fff">
					<path d="M474.519-78.928c119.091 0 198.301-3.881 254.128 45.44 54.456 48.109 50.824 139.34 50.824 257.739 0 34.615.514 66.141-.108 94.785.273 22.7.108 46.803.108 72.15 0 34.614.514 66.14-.108 94.784.273 22.7.108 46.802.108 72.149 0 34.614.514 66.14-.108 94.784.273 22.701.108 46.803.108 72.151 0 34.614.514 66.14-.108 94.784.273 22.7.108 46.802.108 72.149 0 118.403 6.041 200.663-48.101 255.073-52.356 52.61-137.761 48.11-256.851 48.11-38.685 0-74.101-.01-105.836-1.56-36.07 2.23-77.161 1.56-123.311 1.56-119.091 0-207.203 0-252.311-45.39-52.64-52.96-49.008-139.39-49.008-257.792 0-27.606-.1-53.736.383-78.164-.647-27.246-.383-56.846-.383-88.769 0-27.607-.1-53.737.383-78.164-.647-27.247-.383-56.847-.383-88.771 0-27.606-.1-53.736.383-78.163-.647-27.246-.383-56.847-.383-88.77 0-27.607-.1-53.737.383-78.165-.647-27.246-.383-56.846-.383-88.77 0-118.399-1.812-209.631 48.1-255.925 53.553-49.67 134.128-47.255 253.219-47.255 44.913 0 84.153-.551 118.607 1.406 32.529-1.695 69.215-1.406 110.54-1.406"></path>
				</mask>
				<path
					fill={colorA}
					fillOpacity={colorAOpacity}
					d="M474.519-78.928c119.091 0 198.301-3.881 254.128 45.44 54.456 48.109 50.824 139.34 50.824 257.739 0 34.615.514 66.141-.108 94.785.273 22.7.108 46.803.108 72.15 0 34.614.514 66.14-.108 94.784.273 22.7.108 46.802.108 72.149 0 34.614.514 66.14-.108 94.784.273 22.701.108 46.803.108 72.151 0 34.614.514 66.14-.108 94.784.273 22.7.108 46.802.108 72.149 0 118.403 6.041 200.663-48.101 255.073-52.356 52.61-137.761 48.11-256.851 48.11-38.685 0-74.101-.01-105.836-1.56-36.07 2.23-77.161 1.56-123.311 1.56-119.091 0-207.203 0-252.311-45.39-52.64-52.96-49.008-139.39-49.008-257.792 0-27.606-.1-53.736.383-78.164-.647-27.246-.383-56.846-.383-88.769 0-27.607-.1-53.737.383-78.164-.647-27.247-.383-56.847-.383-88.771 0-27.606-.1-53.736.383-78.163-.647-27.246-.383-56.847-.383-88.77 0-27.607-.1-53.737.383-78.165-.647-27.246-.383-56.846-.383-88.77 0-118.399-1.812-209.631 48.1-255.925 53.553-49.67 134.128-47.255 253.219-47.255 44.913 0 84.153-.551 118.607 1.406 32.529-1.695 69.215-1.406 110.54-1.406"
				/>
				<path
					fill={colorB}
					d="M474.519-78.928v1zm254.128 45.44.663-.75zm50.824 257.739h-1zm-.108 94.785-.999-.022-.001.017v.017zm.108 72.15h-1zm-.108 94.784-.999-.022-.001.017v.017zm.108 72.149h-1zm-.108 94.784-.999-.021-.001.016v.017zm.108 72.151h-1zm-.108 94.784-.999-.022-.001.017v.017zm.108 72.149h-1zM731.37 1147.06l.709.7zm-256.851 48.11v-1zm-105.836-1.56.049-1h-.111zm-123.311 1.56v1zm-252.311-45.39-.71.71zm-49.008-257.792h1zm.383-78.164 1 .02v-.043zm-.383-88.769h1zm.383-78.164 1 .019v-.043zm-.383-88.771h1zm.383-78.163 1 .02v-.044zm-.383-88.77h1zm.383-78.165 1 .02v-.043zm-.383-88.77h1zm48.1-255.925-.68-.733zm253.219-47.255v1zm118.607 1.406-.057.999.054.003.055-.003zm110.54-1.406v1c59.587 0 109.076-.968 150.664 4.217 41.555 5.18 75.094 16.493 102.802 40.972l.662-.75.663-.749c-28.12-24.842-62.1-36.249-103.88-41.458-41.746-5.204-91.408-4.232-150.911-4.232zm254.128 45.44-.662.75c26.966 23.822 39.619 58.373 45.504 101.895 5.887 43.536 4.982 95.853 4.982 155.094h2c0-59.158.91-111.656-5-155.362-5.912-43.721-18.671-78.84-46.161-103.127zm50.824 257.739h-1c0 34.638.514 66.133-.107 94.763l.999.022 1 .022c.622-28.658.108-60.216.108-94.807zm-.108 94.785-1 .012c.273 22.692.108 46.781.108 72.138h2c0-25.338.165-49.454-.108-72.162zm.108 72.15h-1c0 34.638.514 66.132-.107 94.762l.999.022 1 .021c.622-28.657.108-60.215.108-94.805zm-.108 94.784-1 .012c.273 22.692.108 46.78.108 72.137h2c0-25.337.165-49.453-.108-72.161zm.108 72.149h-1c0 34.638.514 66.133-.107 94.763l.999.021 1 .022c.622-28.658.108-60.215.108-94.806zm-.108 94.784-1 .012c.273 22.693.108 46.782.108 72.139h2c0-25.338.165-49.454-.108-72.163zm.108 72.151h-1c0 34.638.514 66.132-.107 94.762l.999.022 1 .022c.622-28.658.108-60.216.108-94.806zm-.108 94.784-1 .012c.273 22.692.108 46.781.108 72.137h2c0-25.337.165-49.453-.108-72.161zm.108 72.149h-1c0 59.254 1.508 109.323-3.74 151.403-5.242 42.05-17.213 75.97-44.07 102.96l.709.71.709.7c27.286-27.42 39.364-61.83 44.637-104.12 5.267-42.25 3.755-92.508 3.755-151.653z"
				/>
			</svg>

			<div className="relative z-10 flex h-full w-full items-center justify-center">
				{children}
			</div>
		</div>
	);
};

export default TallSquircleContainer;
